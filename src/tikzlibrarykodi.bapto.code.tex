% βάπτω • (báptō)
%   1. I dip, submerge
%   2. I dye, colour
%   3. I baptise

% Bapto is a node labeling mechanism.
% It allows for non-invasive relabeling.

% ,-- input             input hook
% `-> dispatcher ----.  forwards according to
% ,---[overwrite]----'    label overwriting configuration
% `-> (name|alias|×)    to either name key, alias key or discarding the input

%==[ input stage ]==============================================================

\pgfqkeys{/bapto/input}{
  .forward to=/bapto/dispatcher,
}

%==[ dispatching stage ]========================================================

\pgfqkeys{/bapto/overwrite}{.is choice,
  false/.style={/bapto/dispatcher/.code=
    {\tikz@fig@name\ifx\tikz@fig@name\empty\pgfqkeys{/tikz}{name=##1}\fi}},
  alias/.style={/bapto/dispatcher/.code={\pgfqkeys{/tikz}{alias=##1}}},
  true/.style= {/bapto/dispatcher/.code={\pgfqkeys{/tikz}{name=##1}}},
  false, % default is no name overwriting and no aliasing
}
